# 网页图片抓取工具

![](https://img.shields.io/badge/Node.js-14%2B-green)
![](https://img.shields.io/badge/License-MIT-blue)

一个基于 Node.js 的网页图片抓取工具，可自动解析网页内容并批量下载所有图片资源。

## 功能特性

- 🌐 自动解析网页所有图片链接
- ⚡ 多线程并发下载（默认 5 线程）
- 🔄 自动重试机制（失败后最多重试 3 次）
- 📂 自定义保存路径（支持相对/绝对路径）
- 🎨 智能识别图片格式（支持 JPG/PNG/GIF/WEBP 等）
- 📊 实时下载进度显示
- 🛡️ 路径合法性校验

## 安装要求

- Node.js 14+
- npm 6+

## 快速开始

1. 安装依赖：

```bash
npm install prompts chalk puppeteer axios p-limit ora
```

2. 运行工具：

```bash
node image-downloader.js
```

## 使用说明

1. 输入目标网址（需包含 http/https 协议头）

   ```
   请输入目标网址 › https://example.com
   ```

2. 输入保存路径（可选，默认`./images`）

   ```
   请输入保存路径(可选) › ./my-images
   ```

3. 等待下载完成
   ```
   ✅ 下载成功 (23/45): https://example.com/image1.jpg
   ❌ 下载失败 (2/45): https://example.com/broken.jpg (原因: timeout)
   ```

## 技术细节

### 文件保存规则

- 自动根据 Content-Type 添加文件后缀
- 同名文件自动覆盖（不添加时间戳）
- 自动过滤 SVG 等矢量图形

### 性能参数

| 项目         | 参数         |
| ------------ | ------------ |
| 并发线程数   | 5            |
| 请求超时时间 | 10 秒        |
| 最大重试次数 | 3 次         |
| 重试间隔     | 指数退避策略 |

## 注意事项

1. 路径规范：

   - 不要包含以下字符：`\`, `/`, `:`, `*`, `?`, `"`, `<`, `>`, `|`
   - Windows 用户建议使用反斜杠路径（如`C:\\Downloads`）

2. 网络要求：

   - 需能正常访问目标网站
   - 国外网站建议使用代理

3. 法律责任：
   - 请遵守目标网站的 robots.txt 协议
   - 禁止用于非法用途

## 错误处理

常见错误代码说明：
| 错误提示 | 可能原因 |
|---------------------|---------------------|
| Navigation timeout | 网页加载超时 |
| ERR_CONNECTION_REFUSED | 目标网站拒绝连接 |
| ENOTDIR | 保存路径包含非法字符 |
| ECONNRESET | 服务器意外断开连接 |

## 许可证

[MIT License](LICENSE) © 2025 PoenL

---

> 遇到问题请提交 Issue，欢迎贡献代码！✨  
> 温馨提示：批量下载前请确认网站版权政策，合法使用工具。🔒

```markdown
这个 README 包含了：

- 清晰的安装和使用说明
- 技术参数表格
- 注意事项和错误处理指南
- 自动化徽章和许可证信息
- 友好的交互提示格式

可以根据实际需求调整以下内容：

1. 替换最后的许可证信息
2. 添加贡献指南
3. 补充环境配置说明
4. 增加运行截图
5. 添加测试方法
```
